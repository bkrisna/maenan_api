#!/usr/bin/python3
#########################################################################
# PURPOSE: to submit htrack data from cli                               #
# As this is a custom script, use it with your own risk.                #
# Any issue or difficulty, feel free to contact me.                     #
# @2021 - bkrisna - b.krisnamurti@gmail.com                             #
#########################################################################

import requests
import json
import urllib
import base64
import time as time_
import datetime

from datetime import datetime, timedelta
from datetime import date
from requests.packages.urllib3.exceptions import InsecureRequestWarning
requests.packages.urllib3.disable_warnings(InsecureRequestWarning)
from urllib.parse import urlencode, quote_plus

def get_foto_img():
    return "data:image/jpeg;base64,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"

def tele_notif(msg):
    token_id = '1948644296:AAGlcpicAkhZsduhSOBxzEUlCKFF4T---yA'
    chat_id = '-395089435'
    payload = {
        'chat_id': chat_id,
        'text': msg,
        'parse_mode': 'HTML'
    }
    return requests.post("https://api.telegram.org/bot{token}/sendMessage".format(token=token_id), data=payload).content

def logger(ops, res, data):
    date = datetime.now();
    datestr = date.strftime("%Y/%m/%d %H:%M:%S")
    state = "success" if res else "failed"
    log = '[{0:s}][{1:^9s}][{2:^9s}][{3:s}]'.format(datestr, ops, state, data)
    #tele_notif(log)
    print (log)
    return True
 
def send_request( act, urlParams=None ):
    baseUri ='https://healthtracking.telkomsigma.co.id/api'
    ses = requests.Session()
    ses.verify = False #disables SSL certificate verification
    if urlParams is not None:
        qs=urlencode(urlParams)

    reqUrl = baseUri + '/' + act + '?' + qs
    try:    
        res = ses.get(reqUrl)
        return res.json()
    except Exception as e:
        return str(e)
 
def submit_request( act, emp_name, emp_nik, emp_lat, emp_lon, emp_temp ):
    baseUri ='https://healthtracking.telkomsigma.co.id/api'
    ses = requests.Session()
    ses.verify = False #disables SSL certificate verification

    cookies = {
        '_ga': 'GA1.3.1042012803.1627844055',
        'auth.strategy': 'local',
    }

    headers = {
        'Connection': 'keep-alive',
        'sec-ch-ua': '"Chromium";v="92", " Not A;Brand";v="99", "Google Chrome";v="92"',
        'Accept': 'application/json, text/plain, */*',
        'sec-ch-ua-mobile': '?0',
        'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36',
        'Content-Type': 'application/json;charset=UTF-8',
        'Origin': 'https://healthtracking.telkomsigma.co.id',
        'Sec-Fetch-Site': 'same-origin',
        'Sec-Fetch-Mode': 'cors',
        'Sec-Fetch-Dest': 'empty',
        'Referer': 'https://healthtracking.telkomsigma.co.id/check',
        'Accept-Language': 'en-US,en;q=0.9,id-ID;q=0.8,id;q=0.7',
    }

    data = '[{"full_name":"' + emp_name + '","nik":"' + emp_nik + '","create_lat":' + emp_lat + ',"create_long":' + emp_lon + ',"suhu": ' + emp_temp + ',"suhu_photo":"' + get_foto_img() + '","complaints_value":[{"complaint_id":9,"complaint_name":"Batuk","complaint_name_en":"Cough","complaint_result":"No"},{"complaint_id":15,"complaint_name":"Cepat Lelah","complaint_name_en":null,"complaint_result":"No"},{"complaint_id":1,"complaint_name":"Demam","complaint_name_en":"Fever","complaint_result":"No"},{"complaint_id":3,"complaint_name":"Diare, Mual, Muntah","complaint_name_en":"Diarrhea","complaint_result":"No"},{"complaint_id":20,"complaint_name":"Kebiruan pada Bibir dan Kuku","complaint_name_en":null,"complaint_result":"No"},{"complaint_id":4,"complaint_name":"Kejang","complaint_name_en":"Convulsions","complaint_result":"No"},{"complaint_id":25,"complaint_name":"Kontak dg ODP/PDP COVID dalam 14 hari terakhir","complaint_name_en":null,"complaint_result":"No"},{"complaint_id":24,"complaint_name":"Menggigil","complaint_name_en":null,"complaint_result":"No"},{"complaint_id":16,"complaint_name":"Nafsu Makan Menurun","complaint_name_en":null,"complaint_result":"No"},{"complaint_id":17,"complaint_name":"Nyeri Otot & Sendi","complaint_name_en":null,"complaint_result":"No"},{"complaint_id":22,"complaint_name":"Penciuman Berkurang","complaint_name_en":null,"complaint_result":"No"},{"complaint_id":21,"complaint_name":"Penurunan Kesadaran","complaint_name_en":null,"complaint_result":"No"},{"complaint_id":26,"complaint_name":"Pernah melakukan perjalanan ke Luar Negeri dalam 14 hari terakhir","complaint_name_en":null,"complaint_result":"No"},{"complaint_id":10,"complaint_name":"Pilek","complaint_name_en":"Cold","complaint_result":"No"},{"complaint_id":19,"complaint_name":"Riwayat Penyakit Kronis (DM, Jantung, Ginjal, Autoimun, Hipertensi, PPOK, TBC)","complaint_name_en":null,"complaint_result":"No"},{"complaint_id":18,"complaint_name":"Sakit Kepala","complaint_name_en":null,"complaint_result":"No"},{"complaint_id":11,"complaint_name":"Sakit Tenggorokan","complaint_name_en":"Sore throat","complaint_result":"No"},{"complaint_id":2,"complaint_name":"Sesak Napas","complaint_name_en":"Out of Breath","complaint_result":"No"},{"complaint_id":23,"complaint_name":"Usia > 60","complaint_name_en":null,"complaint_result":"No"}],"work_type_id":2,"healthy_class":"HEALTHY","method":"insert"}]'
   
    try:
        res = ses.post(baseUri + '/' + act, headers=headers, cookies=cookies, data=data)
        return res.json()
    except Exception as e:
        return str(e)

def get_employee_data( nik, date ):
    act = 'employeehistory'
    urlParams = {
        'nik' : nik,
        'date' : date
    }
    emp_data = send_request(act, urlParams)
    return 'name:' + emp_data['data'][0].get('full_name') + '; date:' + emp_data['data'][0].get('check_date') + '; time:' + emp_data['data'][0].get('check_time') + '; lon:' + emp_data['data'][0].get('create_lat') + '; lat: ' + emp_data['data'][0].get('create_long')

def submit_employee_data( payload ):
    act = 'employeeregis'
    return submit_request(act, payload['emp_name'], payload['emp_nik'], payload['emp_lat'], payload['emp_lon'], payload['emp_temp'])

def main():
    date = datetime.now();
    datestr = date.strftime("%Y-%m-%d")
    
    emp_data = {
        'emp_name': 'Bayu Krisnamurti',
        'emp_nik': 'L201508180',
        'emp_lat' : '-6.424483627092651',
        'emp_lon' : '106.81285631028804',
        'emp_temp' : '36.5'
    }

    logger ('submit', True, 'Start submited data for Name: ' + emp_data['emp_name'])
    sub = submit_employee_data(emp_data)
    logger ('result', True, json.dumps(sub))
    res = get_employee_data(emp_data['emp_nik'],datestr)
    logger ('getdata', True, res)
    tele_notif(res)

# just calls the `main` function above
if __name__ == '__main__':
    main()